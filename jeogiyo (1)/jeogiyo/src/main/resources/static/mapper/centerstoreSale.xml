<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace='com.jpro.jmybatis.JcenterStoreSaleMapper'>
	<select id='JsaleFind3' parameterType='JpayAfterVo' resultType='Integer'>
		select sum(harutotal)
		from jpayafter2
		where mainLocal=#{address}
		and DATE(nal) between #{date1}
		and #{date2}
	</select>
	
		<select id='JsaleFind3_all' parameterType='JpayAfterVo' resultType='Integer'>
		select sum(harutotal)
		from jpayafter2
		where DATE(nal)
			  between #{date1}
			  and #{date2}
	</select>
	
	<select id='totHit' parameterType='JpayAfterVo' resultType='Integer'>
		select count(mainLocal)
		from jpayafter2
		where mainLocal=#{address} 
		and DATE(nal) between #{date1}
		and #{date2}
	</select>
	
	<select id='totHit_all' parameterType='JpayAfterVo' resultType='Integer'>
		select count(mainLocal)
		from jpayafter2
		where DATE(nal)
			  between #{date1}
		      and #{date2}
	</select>
	
	<select id='storeSaleList' parameterType='JpayAfterVo' resultType='JpayAfterVo'>
		select storeName, sum(harutotal)
		AS harutotal
		from jpayafter2
		where mainLocal = #{address}
		and DATE(nal) between #{date1}
		and #{date2}
		group by storeName
		order by harutotal desc limit 3;
	</select>
	
	<select id='storeSaleList_all' parameterType='JpayAfterVo' resultType='JpayAfterVo'>
		select storeName, sum(harutotal)
		AS harutotal
		from jpayafter2
		where
		DATE(nal) between #{date1}
		and #{date2}
		group by storeName
		order by harutotal desc limit 3;
	</select>

</mapper>